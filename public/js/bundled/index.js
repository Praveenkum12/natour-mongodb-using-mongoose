require("@babel/polyfill");var e=require("axios");function t(e){return e&&e.__esModule?e.default:e}const o=function(){let e=document.querySelector(".alert");e?.parentElement.removeChild(e)},r=function(e,t,r=5){o();let s=`<div class="alert alert--${e}">${t}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",s),setTimeout(o,1e3*r)},s=async function(o,s){try{let a=await t(e)({method:"POST",url:"/api/v1/users/login",data:{email:o,password:s}});"success"===a.data.status&&(r("success","Logged in succcessfully!!"),window.setTimeout(function(){location.assign("/")},1500))}catch(e){r("error",e.response.data.message)}},a=async function(){try{await t(e)("/api/v1/users/logout"),location.reload(!0),location.assign("/")}catch(e){r("error","Error on Logging out. Try again!")}},n=async function(o,s){try{let a=await t(e)({method:"PATCH",url:"password"===s?"/api/v1/users/updateMyPassword":"/api/v1/users/updateMe",data:o});"success"===a.data.status&&(r("success",`${s.toUpperCase()} updated successfully!`),location.assign("/me"))}catch(e){r("error",e.response.data.message)}},u=async o=>{let s=Stripe("pk_test_51ORuzoSJChrrOJZcfGJUd3FLRQbWABXd50XJ8GmQvKjWWjnofU6QaSIbeO0YF7z640vAmVtUlwQyTXPbtzcS93VX0004XpYfVh");try{let r=await t(e)(`/api/v1/bookings/checkout-session/${o}`);console.log(r),await s.redirectToCheckout({sessionId:r.data.session.id})}catch(e){console.log("Error ",e),r("error",e)}},c=async function(o,s,a,n){try{let u=await t(e)({method:"POST",url:"/api/v1/users/signup",data:{name:o,email:s,password:a,passwordConfirm:n}});"success"===u.data.status&&(r("success","Sign up succcessfully!!"),window.setTimeout(function(){location.assign("/")},100))}catch(e){r("error",e.response.data.message)}};document.querySelector(".form-login")?.addEventListener("submit",function(e){e.preventDefault(),s(document.querySelector("#email").value,document.querySelector("#password").value)}),document.querySelector(".form-signup")?.addEventListener("submit",function(e){e.preventDefault();let t=document.querySelector("#username").value;c(t,document.querySelector("#email").value,document.querySelector("#password").value,document.querySelector("#confirm-password").value)}),document.querySelector("#log-out")?.addEventListener("click",function(){a()}),document.querySelector(".form-user-data")?.addEventListener("submit",function(e){e.preventDefault();let t=new FormData;t.append("name",document.querySelector("#name").value),t.append("email",document.querySelector("#email").value),t.append("photo",document.querySelector("#photo").files[0]),n(t,"data")}),document.querySelector(".form-user-password")?.addEventListener("submit",function(e){e.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...",n({passwordCurrent:document.querySelector("#password-current").value,password:document.querySelector("#password").value,passwordConfirm:document.querySelector("#password-confirm").value},"password"),document.querySelector(".btn--save-password").textContent="Save Password",document.querySelector("#password-current").value="",document.querySelector("#password").value="",document.querySelector("#password-confirm").value=""}),document.getElementById("book-tour")?.addEventListener("click",function(e){e.target.textContent="Processing...";let{tourId:t}=e.target.dataset;u(t)});const d=document.querySelector("body").dataset.alert;alert&&r("sucsess",d,20);
//# sourceMappingURL=index.js.map
